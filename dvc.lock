schema: '2.0'
stages:
  get_data:
    cmd: wget -O a1_RestaurantReviews_HistoricDump.tsv 
      https://github.com/proksch/restaurant-sentiment/raw/refs/heads/main/a1_RestaurantReviews_HistoricDump.tsv
    outs:
    - path: a1_RestaurantReviews_HistoricDump.tsv
      hash: md5
      md5: 102f1f4193e0bdebdd6cce7f13e0a839
      size: 54686
  preprocess:
    cmd: python -m review_rating.modeling prepare a1_RestaurantReviews_HistoricDump.tsv
      -o output -t 0.1
    deps:
    - path: review_rating/
      hash: md5
      md5: 65a2bc99434b2e31d9c5fcdd09f0e513.dir
      size: 57525
      nfiles: 27
    outs:
    - path: output/processed_data.pk1
      hash: md5
      md5: 6be8c05aa5c9bab7db095e9564dc6288
      size: 10231603
    - path: output/vectorizer.pkl
      hash: md5
      md5: 5f5b5a90a88bc2076ed64357a978d490
      size: 40162
  train:
    cmd: python -m review_rating.modeling train --input-dir output --output-model
      output/
    deps:
    - path: review_rating/
      hash: md5
      md5: 65a2bc99434b2e31d9c5fcdd09f0e513.dir
      size: 57525
      nfiles: 27
    outs:
    - path: output/model-gauss.jbl
      hash: md5
      md5: 1785e51e8d180acdbd94e2a5401be63e
      size: 46215
    - path: output/model-multi.jbl
      hash: md5
      md5: 56dc8bb05b951cba03c37c18c5dcacb0
      size: 46231
  analyze:
    cmd: python -m review_rating.modeling evaluate --input-dir output --model-path
      output/ --metrics-path output/metrics.json
    deps:
    - path: review_rating/
      hash: md5
      md5: 65a2bc99434b2e31d9c5fcdd09f0e513.dir
      size: 57525
      nfiles: 27
    outs:
    - path: output/metrics.json
      hash: md5
      md5: cc6fc10af3ecd0531bef148d9c35b3d7
      size: 290
